<!DOCTYPE html>
<html>
<head>
  <title>Queso</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>
	
	<% if notice %>
	<div class='notifications top-right inverse' data-notice-text="<%= notice %>"></div>
	<% end %>
		
    <div class="navbar">
	    <div class="navbar-inner">
		    <div class="container-fluid">
			    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
				    <span class="icon-bar"></span>
				    <span class="icon-bar"></span>
				    <span class="icon-bar"></span>
			    </a>
			    
			    <a href="<%= root_path %>" name="top"><img src="/assets/queso.png" width="40px" class="nav" style="margin-top: 3px;" /></a>
			    <a class="brand" href="<%= root_path %>" name="top">Queso</a>
			    <div class="nav-collapse collapse">
				    <ul class="nav">
					    <li <%= controller.controller_name == "general" ? "class=\"active\"".html_safe : "" %>><a href="<%= root_path %>"><i class="icon-home"></i> Home</a></li>					    
					    <% if can? :manage, User %>
					    	<li class="divider-vertical"></li>
					    	<li <%= controller.controller_name == "users" ? "class=\"active\"".html_safe : "" %>><a href="<%= users_path %>"><i class="icon-user"></i> Users</a></li>
					    <% end %>
					    <li class="divider-vertical"></li>
					    <li><a href="#"><i class="icon-envelope"></i> Messages</a></li>
					    <% if can? :read, Exam %>
					    	<li class="divider-vertical"></li>
					    	<li <%= controller.controller_name == "exams" ? "class=\"active\"".html_safe : "" %>><a href="<%= exams_path %>"><i class="icon-th-list"></i> Exams</a></li>
					    <% end %>				    
					    <% if can? :read, Question %>
					    	<li class="divider-vertical"></li>
					    	<li <%= (Question::TYPES.include?( controller.controller_name.chop ) || controller_name == "questions") ? "class=\"active\"".html_safe : "" %>><a href="<%= questions_path %>"><i class="icon-question-sign"></i> Questions</a></li>
					    <% end %>
					    <li class="divider-vertical"></li>
				    </ul>
				    
				    <div class="pull-right">
			    	<% if current_user %>
			    		<ul class="nav pull-right">
							<li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Welcome, <%= current_user.username %> <b class="caret"></b></a>
							<ul class="dropdown-menu">
								<li><a href="<%= user_path(current_user) %>"><i class="icon-user"></i> View Profile</a></li>
								<li><a href="<%= edit_user_path(current_user) %>"><i class="icon-cog"></i> Edit Profile</a></li>
								<li><a href="#"><i class="icon-envelope"></i> Contact Support</a></li>
								<li class="divider"></li>
								<li><a href="<%= logout_path %>"><i class="icon-off"></i> Logout</a></li>
							</ul>
							</li>
						</ul>
			    	<% elsif !current_page?(login_path) %>
					    <%= link_to "Sign Up", new_user_path, :class => "btn btn-primary" %>
					    <a class="btn btn-success" data-toggle="modal" href="#loginModal" >Login</a> <!-- The loginModal is defined in the login_modal partial. -->
					    <%= render 'login_modal' %>
				    <% end %>
				    </div>
			    </div>
		    <!--/.nav-collapse -->
		    	
		    </div>
		    <!--/.container-fluid -->
	    </div>
	    <!--/.navbar-inner -->
    </div>
    <!--/.navbar -->
    
    <div class="container">    

	<%= yield %>
	
	</div>

</body>
</html>
