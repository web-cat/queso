<h1>Questions</h1>

<div class="btn-toolbar">
	<a href="<%= new_question_path %>"><button  class="btn btn-primary" style="margin-right: 5px;">New Question</button></a>
    <a href="<%= questions_path(:format => "csv") %>"><button class="btn">Export</button></a>
</div>
<div class="well">
    <table class="table" data-provides="rowlink">
      <thead>
        <tr>
          <th>#</th>
          <th>Statement</th>
          <th>Points</th>
          <th>Made By</th>
          <th>Used</th>
          <th style="width: 36px;"></th>
        </tr>
      </thead>
      <tbody>
      	<% @questions.each do |question| %>
      	<% if can? :read, question %>
        <tr>
    	  <td>
          	<%= link_to question.id.to_s, question %>
      	  </td>
    	  <td><%= truncate(question.statement, :length => 60, :omission => "...") %></td>                  
          <td><%= question.points %></td>
          <td><%= question.user.lastname || "Not Found" %></td>
          <td><%= question.used ? "Yes" : "No" %></td>
          
          <td class="nolink">
          	<% if can? :update, question %>
              <a href="<%= edit_question_path(question) %>"><i class="icon-pencil"></i></a>
            <% end %>
            <% if can? :delete, question %>
              <a href="#deleteQuestionModal" role="button" data-toggle="modal" id="questionDeleteButton" data-delete-question-id="<%= question.id.to_s %>"><i class="icon-remove"></i></a>
          	<% end %>
          </td>
        </tr>
        <% end %>
        <% end %>
      </tbody>
    </table>
</div>

<div align="right">
<%= paginate @questions, :window => 3, :outer_window => 2 %>
</div>

<div class="modal small hide fade" id="deleteQuestionModal" tabindex="-1" role="dialog" aria-labelledby="deleteQuestionModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
        <h3 id="deleteQuestionModalLabel">Delete Confirmation</h3>
    </div>
    <div class="modal-body">
        <p class="error-text">Are you sure you want to delete this question?</p>
    </div>
    <div class="modal-footer">
    	 <div style="margin-left: 10px; float: right;"><%= button_to 'Delete', "#", :method => :delete, :class => "btn btn-danger", :style => "height: 30px;" %></div>
	     <div style="float: right;"><button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button></div>
    </div>
</div>
 
<br />
